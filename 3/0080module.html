<!DOCTYPE html>
<html lang="ja">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/prism_coy.css">
    <script type="text/javascript" src='../js/prism.js'></script>
    <script type="text/javascript" src='../js/custom.js'></script>
    <title>モジュール</title>
    <div class="topbtn"><a href="#" id="topBtn" onclick="closeAllAccordions()">🔝</a></div>
</head>



<body>



<header id="top">
    <h1>モジュール</h1>
    <p>Python3の拡張機能が使えるようになります。👍<br>
        ものによってはむしろ拡張機能が本体。</p>
</header>



<main>



<article>

  <details id="c1"><summary>Chatpter.1 - モジュールとは</summary>

    <header>
      <h2>拡張機能みたいなもの</h2>
    </header>


<ul>
<li><p>モジュールとは、本体に後付けできるオプション品のようなものです。</p></li>
<li><p>普段は本体だけでもいいけれど、必要に応じて必要なものだけ取り付けて使うということがプログラムでもできます。</p></li>
<li><p>モジュールは自分でも作ることができますが、世の秀才達が作り上げた高性能なものがすでに完成品として数多く用意されているので、あとはそれを取り付けて使うだけになっています。</p></li>
<li><p>Python3の付属品です。</p></li>
<li><p>ものによってはモジュールが本体となり、モジュールが中心となってプログラムを組んでいったりするものもあります。ほとんどアプリです。</p></li>
<li><p>メソッドに引数を与えるだけで難しいことは全部モジュールが完璧にこなしてくれるというスグレモノです。</p></li>
<li><p>今回はそんなモジュールの使い方を少しだけですが紹介します。</p></li>
</ul>


    <footer>
      <a class="backto" href="#" onclick="closeAccordion('c1')">モジュールとは</a>
    </footer>

  </details>

</article>





<section>

  <details id="c2"><summary>Chatpter.2 - 標準モジュール</summary>

    <header>
      <h2>インストール不要のモジュール</h2>
    </header>




  <article>

    <details id="c2-1"><summary>2.1 - 乱数を発生させる</summary>

      <header>
        <h3>import random</h3>
      </header>


<ul>
<li><p><ruby><strong class="b">乱数</strong><rt>らんすう</rt><strong class="b">(ランダム)</strong></ruby>とは、くじびきやビンゴの数のように、なにかの法則に従って生まれてきた数ではない数のことです。</p></li>
<li><p>平たく言えば「無作為な数」「テキトーな数」です。</p></li>
</ul>

<ul>
<li>
  <p>このモジュールを使う場合、次の一文を書き加えます。</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">import random
</code></pre>

</div>
<!-- ----------------------- code end ----------------------- -->

<p>random モジュールを「<strong class="special">インポート</strong>する」と言います。</p>
</li>
<li><p>「ここに書く！」と定められた位置があるわけではありませんが、プログラムの先頭に書いたり、プログラムの開始位置に書いたりします。</p></li>
</ul>

<ul>
<li><p>random モジュールの機能の１つである <strong class="func">.randint(st, ed)</strong>というメソッドを使ってみます。</p></li>
<li>
  <p>このメソッドは、<var><strong>st</strong></var> から <var><strong>ed</strong></var> の間の整数から、乱数を１つ発生させます。</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">import random

num_rnd = random.randint(1, 10)  # 1 から 10 の間の整数から、乱数を１つ発生させる
print(num_rnd)
</code></pre>

<div class="grid-output">
  <code>2</code><span>← 実行する度に毎回変わる</span>
</div>

</div>
<!-- ----------------------- code end ----------------------- -->

</li>
<li><p><code>import</code> の後ろに書かれているのがモジュールの名前になっています。</p></li>
<li><p>このクラス名をメソッドの前に書くことで、このメソッド(乱数発生装置)が機能します。</p></li>

</ul>


      <footer>
          <a class="backto" href="#c2" onclick="closeAccordion('c2-1')">import random</a>
      </footer>

    </details>
  
  </article>
    




  <article>

    <details id="c2-2"><summary>2.2 - 値をカウントして辞書化する</summary>

      <header>
        <h3>from collections import Counter</h3>
      </header>


<ul>
<li><p>このモジュールは、リストなどの要素の各値がいくつあるかを「カウント」して辞書にまとめてくれる便利機能です。</p></li>
<li><p>これを使えば、いちいち <strong class="func">.get()</strong>などを使って作らなくても、リストを与えるだけであとは全部やってくれます。</p></li>
<li><p>せっかくなので先程の <code>random</code> モジュールも使ってみましょう。</p>


<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">from collections import Counter
import random

lst = [chr(random.randint(65, 67)) for _ in range(10)]
lst_dic = Counter(lst)  # ← 書くのはこれだけ

print(lst)
print(lst_dic)
</code></pre>

<code>['A', 'B', 'B', 'A', 'C', 'B', 'B', 'A', 'A', 'A']</code><br>
<code>Counter({'A': 5, 'B': 4, 'C': 1})</code><br>

</div>
<!-- ----------------------- code end ----------------------- -->

<p>「collections モジュールの中にある Counter だけをインポートします」と、このようにモジュールの中の特定の機能だけを指定することもできます。</p>
<p>メリットの１つとして、<code>collections.Counter()</code> と書かなくても、 collections の部分を省略して書くことができるようになります。</p>
</li>

<li><p>結果として出力された <code class="output">Counter()</code> は無視して大丈夫です。() 内にいる辞書が本体です。</p></li>
</ul>

<ul>
<li><p><strong class="func">chr()</strong>とは、数値で表される文字コードに対応した文字に変換する関数です。</p></li>
<li><p><code>chr(65)</code> は <code>'A'</code>、<code>chr(66)</code> は <code>'B'</code>、<code>chr(90)</code> は <code>'Z'</code>、<code>chr(97)</code> は <code>'a'</code> というように、文字コードを引数として与えると、対応した文字が戻り値として返ってきます。</p></li>
<li><p><code>chr(random.randint(65, 67))</code> は、<mark>'A'</mark> から <mark>'C'</mark> をランダムに決めます。</p></li>
<li><p>逆が <strong class="func">ord()</strong> です。<code>ord('A')</code> で <code>65</code> が返ります。どちらもわりと使います。</p></li>
<li><p>例えば A から Z のリストを作る場合、手で <code>['A', 'B', 'C', ・・・]</code> と書いていかなくても、</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">lst = [chr(i+65) for i in range(26)]
</code></pre>

</div>
<!-- ----------------------- code end ----------------------- -->

<p>と書くだけで求める結果が得られます。</p>
<p><code>65</code> の所を <code>97</code> にすれば、小文字のアルファベットになります。</p>
</li>
</ul>


      <footer>
        <a class="backto" href="#c2" onclick="closeAccordion('c2-2')">値をカウントして辞書化する</a>
      </footer>

    </details>
  
  </article>
    



  <article>

    <details id="c2-3"><summary>2.3 - 数学関数を使う</summary>

      <header>
        <h3>import math</h3>
      </header>


<ul>
<li><p>このモジュールをインポートしなくても、ある程度の計算はできますし、数学に詳しければ自分でプログラムを書いて計算することもできます。</p></li>
<li><p>しかしコンピュータは 0 と 1 だけの小数の概念が無い二進数で計算しているために、小数を扱うと知らぬ所で『誤差』という現象が生じてしまいます。</p></li>
<li><p>math モジュールを使うことで、完全にとまではいかないのですが、かなり精度の高い数処理ができるようになるそうです。ｼﾗﾝｹﾄﾞ</p></li>
<li><p>数学に疎い自分でも、便利だなと思う機能を紹介します。</p></li>
</ul>

  <header>
    <h3>math.ceil(x)</h3>
  </header>

<ul>
<li><p>小数を繰り上げて整数にします。</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">import math

n = math.ceil(3.14)
print(n)
</code></pre>

<code>4</code><br>

</div>
<!-- ----------------------- code end ----------------------- -->

</li>

<li><p>インポートしないで書く場合、</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">x = 3.14
n = int(x) + (x - int(x) > 0)
print(n)
</code></pre>

<code>4</code><br>

</div>
<!-- ----------------------- code end ----------------------- -->

</li>

<li><p>インポートしたほうが、何をしているのかがわかりやすくていいですね。👍</p></li>
</ul>


  <header>
    <h3>math.sqrt(x)</h3>
  </header>

<ul>
<li><p>x の平方根を求めます。(<math><msqrt style="font-size: 16px"><mi style="font-size: 24px">x</mi></msqrt></math>)</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">import math

n = math.sqrt(2)
print(n)
</code></pre>

<code>1.4142135623730951</code><br>

</div>
<!-- ----------------------- code end ----------------------- -->

</li>

<li><p>インポートしないで書く場合、</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">n = 2**0.5  # 2 の 1/2乗
print(n)
</code></pre>

<code>1.4142135623730951</code><br>

</div>
<!-- ----------------------- code end ----------------------- -->

<p>または、</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">n = pow(2, 0.5)  # 2 の 1/2乗
print(n)
</code></pre>

<code>1.4142135623730951</code><br>

</div>
<!-- ----------------------- code end ----------------------- -->

</li>
<li><p>インポートするのが面倒でいつも２番目の書き方をしています。😅</p></li>
</ul>

<ul>
  <a href="https://docs.python.org/ja/3/library/math.html" class="linked" target="_blank">【Python 公式リファレンス】 math --- 数学関数</a>
  <p>ここに math モジュールの機能が一覧で掲載されています。<br>
  数学がわからなくても「最低限、ここに書かれていることが理解できるくらいにはなったほうがいいのかな？」という目安になるかもしれません。ぜひ一度覗いてみてください。</p>
</ul>


      <footer>
        <a class="backto" href="#c2" onclick="closeAccordion('c2-3')">数学関数を使う</a>
      </footer>

    </details>
  
  </article>



  <article>

    <details id="c2-4"><summary>2.4 - ディープコピー</summary>

      <header>
        <h3>import copy</h3>
      </header>


<ul>
<li><p>２章で出てきた「コピーが出来る出来ない問題」の正規(?)の解決法です。</p></li>
<li><p>リストの場合、変数のままコピーできませんでした。その解決法の１つとして、</p></li>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">nums1 = [1, 2, 3, 4, 5]
nums2 = nums1[:]  # nums1 の全ての要素を スライスを使って選択
nums1[2] = 6
print(nums1)
print(nums2)
</code></pre>

<code>[1, 2, 6, 4, 5]</code><br>
<code>[1, 2, 3, 4, 5]</code><br>

</div>
<!-- ----------------------- code end ----------------------- -->

<p>スライスを使って新しくリストを作ったものを代入することでコピーを実現していました。</p>
<p>しかしこの方法が使えるのは一次元リストの時のみです。</p>
</ul>

<ul>
<li><p>二次元リストの場合は、リストの中にリストがあります。</p></li>
<li>
  <p>要素がリストの場合、上の方法では要素のリストまではコピーできません。</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">nums1 = [[0, 1], [2, 3], [4, 5]]
nums2 = nums1[:]
nums1[0][0] = 6
print(nums1)
print(nums2)
</code></pre>

<div class="grid-output">
  <code>[[6, 1], [2, 3], [4, 5]]</code><span></span>
  <code>[[6, 1], [2, 3], [4, 5]]</code><span>← コピーできていない</span>
</div>

</div>
<!-- ----------------------- code end ----------------------- -->

</li>
<br>
<li><p>ここで使うのが「<strong>深いコピー</strong>」「<strong>ディープコピー</strong>」というものです。</p></li>
<li><p>名前の通り、深いところまでコピーします。<br>
  何次元でも、どんな型でも<strong>全てを完全にコピーします。</strong>素敵！</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">import copy

nums1 = [[0, 1], [2, 3], [4, 5]]
nums2 = copy.deepcopy(nums1)  # ← ココ
nums1[0][0] = 6
print(nums1)
print(nums2)
</code></pre>

<div class="grid-output">
  <code>[[6, 1], [2, 3], [4, 5]]</code><span></span>
  <code>[[0, 1], [2, 3], [4, 5]]</code><span>← コピーできている</span>
</div>

</div>
<!-- ----------------------- code end ----------------------- -->

</li>
<li><p>一応 copy モジュールを使わなくても、二次元リスト程度なら次のやり方でもコピー出来ます。</p>

<!-- ------------------------- code ------------------------- -->
<div>

<pre><code class="language-python">nums1 = [[0, 1], [2, 3], [4, 5]]
nums2 = [[elm for elm in nums] for nums in nums1]
nums1[0][0] = 6
print(nums1)
print(nums2)
</code></pre>

<div class="grid-output">
  <code>[[6, 1], [2, 3], [4, 5]]</code><span></span>
  <code>[[0, 1], [2, 3], [4, 5]]</code><span>← コピーできている</span>
</div>

</div>
<!-- ----------------------- code end ----------------------- -->

<p>でもめんどくさいですよね。╮(╯-╰)╭</p>
</li>
<li><p><strong>ディープコピー</strong>はリストでも辞書でもセットでも何次元でも引数に１つ変数を与えるだけで完コピできます。</p></li>
<li><p>わざわざ自分で複雑になるプログラムを組んでエラーと闘いながら実現するくらいなら、素直に信頼できる copy モジュールを使うほうが確実です！</p></li>
</ul>

      <footer>
        <a class="backto" href="#c2" onclick="closeAccordion('c2-4')">ディープコピー</a>
      </footer>

    </details>

</article>


    <footer>
      <a class="backto" href="#" onclick="closeAccordion('c2')">標準モジュール</a>
    </footer>

  </details>

</section>



</main>



<footer id="ft">
  <p>モジュール</p>
</footer>
</body>
</html>