<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="description" content="Python3プログラミング paiza Ｃランクレベルアップ問題集『Ｃランク・スキルチェック過去問題セット』のプラスαな解説を公開しています。PC歴40年以上、プログラミング歴足掛け15年以上、完全独学、業界未経験のシロウトネコ、略してシロネコ富沢エアズが、入門者向けにラフなプログラミング学習をお送りしています。">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../../css/style.css">
<link rel="stylesheet" href="../../css/prism_coy.css">
<script type="text/javascript" src='../../js/prism.js'></script>
<script type="text/javascript" src='../../js/custom.js'></script>
<title>【paiza問題集 解説】Cランク・スキルチェック過去問題セット</title>
<div class="homebtn"><a href="../" id="homeBtn">🔙</a></div>
<div class="topbtn"><a href="#" id="topBtn" onclick="closeAllAccordions()">🔝</a></div>
</head>
<body>
<header id="top"><h1>【paiza問題集 解説】<br>Cランク・スキルチェック過去問題セット</h1></header>
<main>

<section>
<details id="c1"><summary>検索履歴</summary>
<header><h2>検索履歴</h2></header>

<article>
<details id="c1-1"><summary>FINAL問題 検索履歴</summary>
<header><h3>検索履歴</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())

search_history = []
for _ in range(N):
    W = input()
    if W in search_history:
        search_history.remove(W)
        search_history.insert(0, W)
    else:
        search_history.insert(0, W)

print(*search_history, sep='\n')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>検索履歴への追加・削除をするだけの問題です。<br>初めは検索履歴は空の状態です。ここから入力ワードを追加・削除していきます。</p>
<p>「追加」とあるのですが、先頭に追加するので <strong class="func">.insert()</strong> メソッドを使います。<br>削除は「検索ワード」を削除、言い方を変えると<strong>取り除く</strong>ので <strong class="func">.remove()</strong> メソッドを使います。<br><strong>insert</strong> は「<ruby>挿入<rt>そうにゅう</rt></ruby>」、<strong>remove</strong>は「<ruby>除去<rt>じょきょ</rt></ruby>」です。</p>
<p><strong class="func">.insert()</strong> メソッドの使い方は「２章 リスト型データを使いこなす機能一覧」の <a href="../../2/0040usefullisttype.html#-insert-h" class="linked" target="_blank">こちら</a> をご覧ください。<br><strong class="func">.remove()</strong> メソッドの使い方は「２章 リスト型データを使いこなす機能一覧」の <a href="../../2/0040usefullisttype.html#-remove-h" class="linked" target="_blank">こちら</a> をご覧ください。</p>
<p>それぞれのメソッドの使い方がわかれば、あとはその通りに使うだけですが、１点だけ注意。<br><strong class="func">.remove()</strong> は除去対象の要素を<strong>先頭から探索していきます。</strong>ですので、 <strong class="func">.insert(0, W)</strong> を実行してから <strong class="func">.remove(W)</strong> を実行してしまうと、<strong class="func">.insert(0, W)</strong> したばかりのものがそのまま <strong class="func">.remove(W)</strong> で除去されてしまいます。それじゃ意味なし！😹 <strong class="func">.remove()</strong> から実行しましょう。</p>
</ul>
<footer><a class="backto" href="#c1-1" onclick="closeAccordion('c1-1')">FINAL問題 検索履歴</a></footer>
</details>
</article>
<footer><a class="backto" href="#c1" onclick="closeAccordion('c1')">検索履歴</a></footer>
</details>
</section>

<section>
<details id="c2"><summary>単語のカウント</summary>
<header><h2>単語のカウント</h2></header>
<article>
<details id="c2-1"><summary>STEP: 1 単語のカウント（力試し編）</summary>
<header><h3>単語のカウント（力試し編）</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()

words_cnt = {}
for word in lst:
    if word not in words_cnt:
        words_cnt[word] = 1
    else:
        words_cnt[word] += 1

for word, cnt in words_cnt.items():
    print(word, cnt)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>100点が取れなかった場合でも、そのプログラムを修正せずにそのまま次のステップに進みましょう。</p>
</ul>
<footer><a class="backto" href="#c2-1" onclick="closeAccordion('c2-1')">STEP: 1 単語のカウント（力試し編）</a></footer>
</details>
</article>

<article>
<details id="c2-2"><summary>STEP: 2 「単語のカウント」を解くために:part1</summary>
<header><h3>「単語のカウント」を解くために:part1</h3></header>
<ul>
<li><p>例１</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()
for word in lst:
    print(word)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p>例２</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()
print(*lst, sep='\n')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p></p>
</ul>
<footer><a class="backto" href="#c2-2" onclick="closeAccordion('c2-2')">STEP: 2 「単語のカウント」を解くために:part1</a></footer>
</details>
</article>

<article>
<details id="c2-3"><summary>STEP: 3 「単語のカウント」を解くために:part2</summary>
<header><h3>「単語のカウント」を解くために:part2</h3></header>
<ul>
<li><p>例１</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()
target_word = 'red'
if target_word in lst:
    print('Yes')
else:
    print('No')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p>例２</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()
target_word = 'red'
print('Yes' if target_word in lst else 'No')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p></p>
</ul>
<footer><a class="backto" href="#c2-3" onclick="closeAccordion('c2-3')">STEP: 3 「単語のカウント」を解くために:part2</a></footer>
</details>
</article>

<article>
<details id="c2-4"><summary>STEP: 4 「単語のカウント」を解くために:part3</summary>
<header><h3>「単語のカウント」を解くために:part3</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()

already_been = set()
for word in lst:
    if word in already_been:
        print('already_been')
    else:
        print(word)
        already_been.add(word)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>すでに登場したワードを格納しておく <code>already_been</code> は、リストでもセットでも構いません。どちらでもよいならば、セットを優先して使いましょう。</p>
</ul>
<footer><a class="backto" href="#c2-4" onclick="closeAccordion('c2-4')">STEP: 4 「単語のカウント」を解くために:part3</a></footer>
</details>
</article>

<article>
<details id="c2-5"><summary>STEP: 5 「単語のカウント」を解くために:part4</summary>
<header><h3>「単語のカウント」を解くために:part4</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()

already_been = set()
for word in lst:
    if word not in already_been:
        print(word)
        already_been.add(word)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p></p>
</ul>
<footer><a class="backto" href="#c2-5" onclick="closeAccordion('c2-5')">STEP: 5 「単語のカウント」を解くために:part4</a></footer>
</details>
</article>

<article>
<details id="c2-6"><summary>STEP: 6 「単語のカウント」を解くために:part5</summary>
<header><h3>「単語のカウント」を解くために:part5</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()

already_been = {}
for word in lst:
    if word not in already_been.keys():
        print(word)
        already_been[word] = 1

for _, value in already_been.items():
    print(value)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>出現回数のカウントはリストでもできますが、ここはより簡単にデータを扱える辞書を使っていきます。<br>まずは初めて登場したワードは、そのワードを画面に出力してから辞書に値を <code>1</code> にして登録します。既に登場したワードの場合は何もしません。</p>
<p>最後に辞書の <strong class="func">.items()</strong>メソッドを使って各ワードの値のみを画面に出力していけば完了です。</p>
<p>また、値が 1 に固定されているので、この様にも書けます。</p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()

already_been = {}
for word in lst:
    print(word)
    already_been[word] = 1

for _, value in already_been.items():
    print(value)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>キーが辞書にすでにある場合は、要素まるごと新しい要素に書き換えられます。<br>本題を解くには最初の書き方が求められますので、こちらのプログラムは参考までに。🐱</p>
<p>辞書のメソッドについては「<a href="../../2/0100usefuldicttype.html#c2-h" class="linked" target="_blank">２章 辞書を使いこなす機能一覧</a>」で学習できます。</p>
</ul>
<footer><a class="backto" href="#c2-6" onclick="closeAccordion('c2-6')">STEP: 6 「単語のカウント」を解くために:part5</a></footer>
</details>
</article>

<article>
<details id="c2-7"><summary>STEP: 7 「単語のカウント」を解くために:part6</summary>
<header><h3>「単語のカウント」を解くために:part6</h3></header>
<ul>
<li><p>例１</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()
word = input()

print(lst.index(word))
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p>例２</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">words_cnt = {word: None for word in input().split()}
word = input()

print(list(words_cnt.keys()).index(word))
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>例１でじゅうぶんなのですが、辞書を使っているので例２も書いてみました。<br>値は扱っていないので <strong>None</strong> にしてあります。</p>
<p><code>words_cnt.keys()</code> でワードのみを抽出し、<strong class="func">list()</strong> 関数でリスト型に変換します。そうすると <strong class="func">.index()</strong> メソッドが使えるようになりますので、該当するワードの要素番号を画面に出力して完了です。</p>
<p>辞書の並び順は保証されているので、リストに変換してもその並びは保持されます。ｱﾝｼﾝｱﾝｺｰﾙﾜｯﾄ</p>
</ul>
<footer><a class="backto" href="#c2-7" onclick="closeAccordion('c2-7')">STEP: 7 「単語のカウント」を解くために:part6</a></footer>
</details>
</article>

<article>
<details id="c2-8"><summary>STEP: 8 「単語のカウント」を解くために:part7</summary>
<header><h3>「単語のカウント」を解くために:part7</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()

word_cnt = {}
for word in lst:
    if word not in word_cnt:
        word_cnt[word] = 1
        print(word)
    else:
        word_cnt[word] += 1

for _, cnt in word_cnt.items():
    print(cnt)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>STEP 6 のプログラムにカウントを加えたものです。(<strong>else</strong>文)<br>代入文では上書きされましたが、代入演算子(<mark>+=</mark>)にするとカウントアップします。</p>
</ul>
<footer><a class="backto" href="#c2-8" onclick="closeAccordion('c2-8')">STEP: 8 「単語のカウント」を解くために:part7</a></footer>
</details>
</article>

<article>
<details id="c2-9"><summary>FINAL問題 単語のカウント</summary>
<header><h3>単語のカウント</h3></header>
<ul>
<li><p>例１</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()

words_cnt = {}
for word in lst:
    if word not in words_cnt:
        words_cnt[word] = 1
    else:
        words_cnt[word] += 1

for word, cnt in words_cnt.items():
    print(word, cnt)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p>例２</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">lst = input().split()

words_cnt = {}
for word in lst:
    words_cnt[word] = words_cnt.get(word, 0) + 1

for word, cnt in words_cnt.items():
    print(word, cnt)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p>例３</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">from collections import Counter

lst = input().split()

words_cnt = Counter(lst)

for word, cnt in words_cnt.items():
    print(word, cnt)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>例１は今までの流れの完成形です。例２は、<strong class="if"></strong>文をひとまとめに書いた方法です。</p>
<p>例３は、予め Python3 に標準で付いている<strong>モジュール</strong>と言われる外部プログラム(懐かしいなこの言い方😊)を利用したやり方です。<br>一行目の召喚魔法で collections の中に入っている Counter という機能を使役できるようにしています。そして <code>Counter(lst)</code> と書くだけで、<strong><code>lst</code> の中の出現したワードの出現回数をまとめて辞書化</strong>してくれます。つまり、この一行 <code>words_cnt = Counter(lst)</code> で、例１・例２の <code>words_cnt = {}</code> から<strong class="for"></strong>文すべてのことを全部やってくれるのです。</p>
<p><strong class="func">Counter()</strong>は便利なのですが、例１・例２の書き方も結構使いますので全部使い慣れましょう。</p>
</ul>
<footer><a class="backto" href="#c2-9" onclick="closeAccordion('c2-9')">FINAL問題 単語のカウント</a></footer>
</details>
</article>
<footer><a class="backto" href="#c2" onclick="closeAccordion('c2')">単語のカウント</a></footer>
</details>
</section>

<section>
<details id="c3"><summary>宝くじ</summary>
<header><h2>宝くじ</h2></header>

<article>
<details id="c3-1"><summary>FINAL問題 宝くじ</summary>
<header><h3>宝くじ</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">atari = input()
n = int(input())

for i in range(n):
    ticket = input()
    
    if ticket == atari:
        print('first')
    elif int(ticket) + 1 == int(atari) or int(ticket) - 1 == int(atari):
        print('adjacent')
    elif ticket[2:] == atari[2:]:
        print('second')
    elif ticket[3:] == atari[3:]:
        print('third')
    else:
        print('blank')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>問題に記述されていないのですが、当選の優先順位は１等からで、複数当選の場合は上位１つだけが当選ということで良いと思います。</p>
<p>宝くじ券の番号は文字列で受け取って処理していきます。</p>
<p>まず１等はそのまま当選番号と一致すれば１等です。</p>
<p>１等前後賞は、宝くじ券と当選番号の両方を整数型に変換してから 1 を足したり引いたりして照合します。このとき 100000 と 199999 は前後賞は１つしかありませんが、<br>100000 - 1 = 99999 でも<br>199999 + 1 = 200000 でも<br>範囲外の存在しない番号なので、『範囲外の値は比較式にかけても当選番号と一致することはない』ということになりますので特別な処理は不要です。</p>
<p>２等は、要素 2 以降、つまり下４桁を照合します。<br>３等も、要素 3 以降、つまり下３桁を照合します。</p>
<p>そして上記のいずれにも合致しない場合は<strong class="b">はずれ</strong>となります。</p>
<p>Fizz Buzz問題と同じ様に、評価順に注意してください。逆順にすると複数当選の時、１等が当たらなくなります！困る！！</p>
</ul>
<footer><a class="backto" href="#c3-1" onclick="closeAccordion('c3-1')">FINAL問題 宝くじ</a></footer>
</details>
</article>
<footer><a class="backto" href="#c3" onclick="closeAccordion('c3')">宝くじ</a></footer>
</details>
</section>

<section>
<details id="c4"><summary>野球の審判</summary>
<header><h2>野球の審判</h2></header>
<article>
<details id="c4-1"><summary>STEP: 1 野球の審判（力試し編）</summary>
<header><h3>野球の審判（力試し編）</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())

strike = 'strike'
ball = 'ball'
ball_count = {strike: 0, ball: 0}
for _ in range(N):
    s = input()
    ball_count[s] += 1
    
    if ball_count[strike] == 3:
        print('out!')
    elif ball_count[ball] == 4:
        print('fourball!')
    else:
        print(s + '!')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>100点が取れなかった場合でも、そのプログラムを修正せずにそのまま次のステップに進みましょう。</p>
</ul>
<footer><a class="backto" href="#c4-1" onclick="closeAccordion('c4-1')">STEP: 1 野球の審判（力試し編）</a></footer>
</details>
</article>

<article>
<details id="c4-2"><summary>STEP: 2 「野球の審判」を解くために:part1</summary>
<header><h3>「野球の審判」を解くために:part1</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())
print(N)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p></p>
</ul>
<footer><a class="backto" href="#c4-2" onclick="closeAccordion('c4-2')">STEP: 2 「野球の審判」を解くために:part1</a></footer>
</details>
</article>

<article>
<details id="c4-3"><summary>STEP: 3 「野球の審判」を解くために:part2</summary>
<header><h3>「野球の審判」を解くために:part2</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())
for _ in range(N):
    print('strike or ball')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p></p>
</ul>
<footer><a class="backto" href="#c4-3" onclick="closeAccordion('c4-3')">STEP: 3 「野球の審判」を解くために:part2</a></footer>
</details>
</article>

<article>
<details id="c4-4"><summary>STEP: 4 「野球の審判」を解くために:part3</summary>
<header><h3>「野球の審判」を解くために:part3</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())
for _ in range(N):
    s = input()
    print(s)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p></p>
</ul>
<footer><a class="backto" href="#c4-4" onclick="closeAccordion('c4-4')">STEP: 4 「野球の審判」を解くために:part3</a></footer>
</details>
</article>

<article>
<details id="c4-5"><summary>STEP: 5 「野球の審判」を解くために:part4</summary>
<header><h3>「野球の審判」を解くために:part4</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())

for _ in range(N):
    s = input()
    if s == 'strike':
        print(s + '!')
    else:
        print(s)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>文字列を繋げる時は「文字列 <mark>+</mark> 文字列」とします。</p>
</ul>
<footer><a class="backto" href="#c4-5" onclick="closeAccordion('c4-5')">STEP: 5 「野球の審判」を解くために:part4</a></footer>
</details>
</article>

<article>
<details id="c4-6"><summary>STEP: 6 「野球の審判」を解くために:part5</summary>
<header><h3>「野球の審判」を解くために:part5</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())

strike = 'strike'
ball_count = {strike: 0}
for _ in range(N):
    s = input()
    if s == 'strike':
        print(s + '!')
        ball_count[s] += 1
        print(ball_count[s])
    else:
        print(s)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>カウントはストライクのみなので、予めストライクだけ辞書に初期値を書いておきます。整数型の変数１つでもカウントできますが、今後の為にもここでは辞書を使います。</p>
<p>『strike! と出力した次の行に』とありますので、<code class="output">strike!</code> を画面に出力した後、ストライクのカウントに 1 を足してからその値を画面に出力します。</p>
</ul>
<footer><a class="backto" href="#c4-6" onclick="closeAccordion('c4-6')">STEP: 6 「野球の審判」を解くために:part5</a></footer>
</details>
</article>

<article>
<details id="c4-7"><summary>STEP: 7 「野球の審判」を解くために:part6</summary>
<header><h3>「野球の審判」を解くために:part6</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())

strike = 'strike'
ball_count = {strike: 0}
for _ in range(N):
    s = input()
    ball_count[s] += 1
    
    if ball_count[strike] == 3:
        print('out!')
    elif s == 'strike':
        print(s + '!')
    else:
        print(s)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>１つ前の問題のプログラムの書き順をそのまま使うと、３つ目のストライクでは <code class="output">strike!</code> を画面に出力してから <code class="output">out!</code> と表示されてしまいます。その為、ボールカウントに 1 を足す文を条件文の前に書き、それから条件文で判定すると３つ目のストライクがアウトに置き替わるようになります。</p>
<p>条件文の書き順に注意してください。アウトの判定がストライクよりも先です。</p>
</ul>
<footer><a class="backto" href="#c4-7" onclick="closeAccordion('c4-7')">STEP: 7 「野球の審判」を解くために:part6</a></footer>
</details>
</article>

<article>
<details id="c4-8"><summary>FINAL問題 野球の審判</summary>
<header><h3>野球の審判</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())

strike = 'strike'
ball = 'ball'
ball_count = {strike: 0, ball: 0}
for _ in range(N):
    s = input()
    ball_count[s] += 1
    
    if ball_count[strike] == 3:
        print('out!')
    elif ball_count[ball] == 4:
        print('fourball!')
    else:
        print(s + '!')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>今度はストライクとボールのコールのしかたが同じになっています。代わりにフォアボールのコールの為のカウントと判定を追加します。</p>
<p>条件に<strong class="b">「投球はこの打者の番がちょうど終了するまで続きます。すなわち、最終的にこの打者にはアウトかフォアボールのいずれかが必ず与えられ、それ以降の投球はおこなわれません。」</strong>とありますので、アウトやフォアボールのコールの後には <strong>break</strong> は書かなくても大丈夫です。</p>
</ul>
<footer><a class="backto" href="#c4-8" onclick="closeAccordion('c4-8')">FINAL問題 野球の審判</a></footer>
</details>
</article>
<footer><a class="backto" href="#c4" onclick="closeAccordion('c4')">野球の審判</a></footer>
</details>
</section>

<section>
<details id="c5"><summary>みかんの仕分け</summary>
<header><h2>みかんの仕分け</h2></header>
<article>
<details id="c5-7"><summary>FINAL問題 みかんの仕分け</summary>
<header><h3>みかんの仕分け</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N, M = map(int, input().split())

for _ in range(M):
    w = int(input())
    num = w / N
    num_int = int(num)

    is_heavy = (num - num_int >= 0.5)
    g = N * num_int + is_heavy * N
    if g == 0:
        g = N

    print(g)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>例として w = 24, N = 10 の時で解説します。</p>
<p>重いほうの箱と軽いほうの箱に仕分けます。<br>まず入力 <code>w</code> を N で割ります。<code>num = w / N</code><br>そしてこの <code>num</code> の整数部分の値を取ります。</p>
<p class="inlook">num = 24 / 10 = <strong>2.4</strong><br>num_int = int(2.4) = <strong>2</strong> ← num の整数部分<br><br>num - num_int = 2.4 - 2 = <strong>0.4</strong> ← num の小数部分</p>
<p><code>is_heavy</code> は、num の小数部分の値が 0.5 以上の時は <code>1</code>(重いほうの箱に入れる) となり、0.5 未満の時は <code>0</code>(軽いほうの箱に入れる) となります。<br><small>※ この <code>0</code> と <code>1</code> の意味は「<a href="../../2/0020truefalse.html#c2-h" class="linked" target="_blank">２章 bool型 True と False</a>」をご覧ください。</small></p>
<p class="inlook">g = 10 * 2 + is_heavy * N<br>↓<br>・<code>is_heavy</code> が 1 の時<br>g = 10 * 2 + <strong>1 * 10</strong> = 30<br>・<code>is_heavy</code> が 0 の時<br>g = 10 * 2 + <strong>0 * 10</strong> = 20<br>↓<br>{20, 21, 22, 23, <strong>24</strong>}, {25, 26, 27, 28, 29, 30}<br>結果、20gの箱に入る。</p>
<p>こうしてみかんを仕分けして入れた箱に表示されている重さを画面に出力していき、ループを抜ければ完了となります。</p>
<p>もし、<code>g</code> が 0 になった場合は、一番軽い N の箱に入れます。 </p>
<p>N が 10 でなくてもいくつであっても、<code>w / N</code> の小数部分を使えば四捨五入の要領で仕分けできますし、ループもしなくてイメージしやすく、ラクかなと。😅</p>
</ul>
<ul>
<p>ステップは必要と感じなかったので、FINAL問題以外はすっ飛ばしました。ご容赦を。</p>
<p>paiza の解答コード例を見て「<strong>continue</strong>ってなんぞや？」と思ったら「<a href="../../3/0060extra.html#c2-2h" class="linked" target="_blank">３章 補足</a>」で知ることができます。</p>
</ul>
<ul>
<li><p>おまけ</p></li>
<p>値を変えて検証します。<br>w = 18, N = 7 の時</p>
<p class="inlook">num = 18 / 7 = <strong>2.5(71428…)</strong><br>num_int = int(2.5) = <strong>2</strong> ← num の整数部分<br><br>num - num_int = 2.5 - 2 = <strong>0.5</strong> ← num の小数部分</p>
<p class="inlook">is_heavy = (2.5 - 2 >= 0.5) = <strong>True</strong> = 1<br>g = N * num_int + is_heavy * N<br>↓<br>g = 7 * 2 + is_heavy * N<br>↓<br>・<code>is_heavy</code> が 1 の時<br>g = 7 * 2 + <strong>1 * 7</strong> = 21<br>・<code>is_heavy</code> が 0 の時<br>g = 7 * 2 + <strong>0 * 7</strong> = 14<br>↓<br>{14, 15, 16, 17}, {<strong>18</strong>, 19, 20, 21}<br>結果、21gの箱に入る。ちなみに w = 17 は、<br>num = w / N = 2.4(28571…) だから 14gの箱に入る。</p>
<p>w = 3, N = 7 の時</p>
<p class="inlook">num = 3 / 7 = <strong>0.4(28571…)</strong><br>num_int = int(0.4) = <strong>0</strong> ← num の整数部分<br><br>num - num_int = 0.4 - 0 = <strong>0.4</strong> ← num の小数部分</p>
<p class="inlook">is_heavy = (0.4 - 0 >= 0.5) = <strong>False</strong> = 0<br>g = N * num_int + is_heavy * N<br>↓<br>g = 7 * 0 + is_heavy * N<br>↓<br>・<code>is_heavy</code> が 1 の時<br>g = 7 * 0 + <strong>1 * 7</strong> = 7<br>・<code>is_heavy</code> が 0 の時<br>g = 7 * 0 + <strong>0 * 7</strong> = 0<br>↓<br>{0, 1, 2, <strong>3</strong>}, {4, 5, 6, 7}<br>0g の箱は無いので <code>if g == 0:</code><br>最も軽い箱 7g の箱に入れる。<code>g = N</code></p>
</ul>
<footer><a class="backto" href="#c5-7" onclick="closeAccordion('c5-7')">FINAL問題 みかんの仕分け</a></footer>
</details>
</article>
<footer><a class="backto" href="#c5" onclick="closeAccordion('c5')">みかんの仕分け</a></footer>
</details>
</section>

<section>
<details id="c6"><summary>【殿堂入りキャンペーン】残り物の量</summary>
<header><h2>残り物の量</h2></header>
<article>
<details id="c6-1"><summary>FINAL問題 【殿堂入りキャンペーン】残り物の量</summary>
<header><h3>【殿堂入りキャンペーン】残り物の量</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">m, p, q = map(int, input().split())
kg = m

kg *= (100 - p) / 100
kg *= (100 - q) / 100

print(kg)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>これはただの算数の問題ですね。😅</p>
<p>p ％を販売したということは、100％から p ％を引くと売れ残り分が、<mark>％</mark> で算出されます。これを最初に仕入れた量に掛け算すると、これが売れ残り分の量となります。</p>
<p>m = 1(kg), p = 80(％を販売) の時</p>
<p class="inlook">(100 - p) / 100<br>↓<br>(100 - 80) / 100<br>↓<br>20 / 100 = 0.2<br>↓<br>1(kg) * 0.2 = 0.2(kg)</p>
<p>q も全く同じ計算です。生鮮食品が総菜に変わっただけです。</p>
<p>q = 40(％を販売) の時</p>
<p class="inlook">(100 - q) / 100<br>↓<br>(100 - 40) / 100<br>↓<br>60 / 100 = 0.6<br>↓<br>0.2(kg) * 0.6 = 0.12(kg)</p>
<p>そしてその結果を画面に出力すれば完了です。</p>
<p>期待する出力に「誤差が0.0001 未満」とありますので、浮動小数が扱える <code>/</code> を使って計算することになります。小数点以下の桁数の処理は今回は考えなくても放置で大丈夫です。</p>
</ul>
<footer><a class="backto" href="#c6-1" onclick="closeAccordion('c6-1')">FINAL問題 【殿堂入りキャンペーン】残り物の量</a></footer>
</details>
</article>
<footer><a class="backto" href="#c6" onclick="closeAccordion('c6')">【殿堂入りキャンペーン】残り物の量</a></footer>
</details>
</section>


<section>
<details id="c7"><summary>1を数えよ【ビット演算】 </summary>
<header><h2>1を数えよ【ビット演算】</h2></header>
<article>
<details id="c7-1"><summary> STEP: 1 1を数えよ </summary>
<header><h3>1を数えよ</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())

N_bin = []  # リストを使う例です
while N > 0:  # 商が 0 になるまで割り続ける
    N, m = N // 2, N % 2  # 2 で割った商と余りの計算
    N_bin.append(m)  # 余りをリストに追加する

N_bin.reverse()  # 出来上がったリストを逆順に並べ替える

# 2進数のリストから 1 の数をカウントする
cnt = 0
for i in N_bin:
    if i == 1:
        cnt += 1

print(cnt)  # 結果出力
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>10進数を 2進数に変換して、2進数の 1 の個数を数えるという問題です。すでに paiza 解答コード例を閲覧された方は「何これ？」と思われたかもしれません。確かに問題文に書かれている通りの方法でプログラムが書かれていないのですから、とんだ肩透かしですよね。😅</p>
<p>手始めなのでここでは問題文の通りにそのままのプログラムを書いてみました。</p>
<p>10進数から 2進数に変換する方法は、後の STEP 4 の問題文に書かれていますので安心してください。😊</p>
</ul>
<footer><a class="backto" href="#c7-1" onclick="closeAccordion('c7-1')">STEP: 1 1を数えよ</a></footer>
</details>
</article>

<article>
<details id="c7-2"><summary>STEP: 2 「1を数えよ」を解くために:part1 </summary>
<header><h3>「1を数えよ」を解くために:part1 </h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())
print(N)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>問題文に『入力を整数型で受け取り、』とありますので、入力後の文字列を整数型に変換してから変数に代入します。</p>
<p>その変数を画面に出力すれば完了です。</p>
</ul>
<footer><a class="backto" href="#c7-2" onclick="closeAccordion('c7-2')">STEP: 2 「1を数えよ」を解くために:part1 </a></footer>
</details>
</article>

<article>
<details id="c7-3"><summary>STEP: 3 「1を数えよ」を解くために:part2 </summary>
<header><h3>「1を数えよ」を解くために:part2 </h3></header>
<ul>
<li><p>例１</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">S = input()
print(S.count('1'))
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p><strong>例２</strong></p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">S = input()
cnt = 0
for s in S:
    if s == '1':
        cnt += 1
print(cnt)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>問題文には２進数とありますが、Ｄランクレベルの問題なので単純に入力を文字列で受け取ってから <code>1</code> の数をカウントするだけで良いと思います。</p>
<p>paiza の解答コード例では <strong class="func">range()</strong> 関数が使われていますが、プログラム例２の様に入力で受け取った文字列をそのまま使うこともできます。</p>
<br>
<p>今後の問題を解くために、<strong>例２</strong>の書き方を用いていきます。</p>
</ul>
<footer><a class="backto" href="#c7-3" onclick="closeAccordion('c7-3')">STEP: 3 「1を数えよ」を解くために:part2 </a></footer>
</details>
</article>

<article>
<details id="c7-4"><summary>STEP: 4 「1を数えよ」を解くために:part3</summary>
<header><h3>「1を数えよ」を解くために:part3</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())

N_bin = []
while N > 0:
    N, m = N // 2, N % 2
    N_bin.append(m)

N_bin.reverse()

cnt = 0
for i in N_bin:
    if i == 1:
        cnt += 1

print(cnt)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>『ループメニュー2 約数の列挙 - STEP: 5 10 進数から 2 進数に変換』と似た問題です。注目すべきは 10進数から 2進数への変換方法です。</p>
<p>paiza の解答コード例もそうなのですが、最後に <code>1</code> の数をカウントするだけですので、この問題ではわざわざリバースする必要はありません。😅<br>しかし正しく 2進数を作るためには逆順にする必要がありますので、省略しないでくださいね。😉</p>
<p>省略しちゃった猫さんはやりなおし！😸</p>
<br>
<small>
<p>※ paiza 解答コード例では逆順にする際に <strong class="func">reversed()</strong>関数が使われていますが、この関数は戻り値を変数に格納しなければ、戻り値がその場で消滅してしまいます。(おそらく凡ミス😅)</p>
<p>✕ reversed(binaryNumber)<br>○ binaryNumber = reversed(binaryNumber)</p>
<p>この他、</p>
<p>binaryNumber = binaryNumber[::-1]</p>
<p>という書き方でも逆順にできます。</p>
</small>
</ul>
<footer><a class="backto" href="#c7-4" onclick="closeAccordion('c7-4')">STEP: 4 「1を数えよ」を解くために:part3</a></footer>
</details>
</article>

<article>
<details id="c7-5"><summary>STEP: 5 「1を数えよ」を解くために:part4 </summary>
<header><h3>「1を数えよ」を解くために:part4 </h3></header>
<ul>
<li><p>paiza 解答コード例をそのまま引用</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())

if N & 1 == 1:
    print("Yes")
else:
    print("No")
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>簡単に入力値が奇数ならば必ず <code class="output">Yes</code> になるのですが、今回は『<strong class="b">N を 2 進数に変換することなく、AND 演算(論理積)を使って判定してください。</strong>』と釘を刺されているので、<strong>ビット演算</strong>を用いる方法に従います。</p>
<p>これまでのステップの内容は、ひとまず横に置いといてください。</p>
</ul>
<ul>
<li><p>まず、『<ruby><strong class="special">論理積</strong><rt>ろんりせき</rt></ruby>』というものについて説明します。</p></li>
<p>「<a href="../../2/0090set.html#c2-2h" class="linked" target="_blank">セットさんは重複を許さない - 集合と集合演算</a>」で紹介した集合演算と類似していますが、あちらは集合における演算、こちらは<strong>ビットにおける演算</strong>で、用途は別です。でも使う記号は同じです。😅</p>
<p>初めはややこしく感じるかもしれませんが、使われる記号が同じなだけあって<strong>理屈も同じ</strong>ですので、『<strong class="b">集合演算はわかるけど</strong>、ビット演算は初めて扱う』という方ならば、早く理解できると思います。</p>
<br>
<li><p>集合演算では主に「和集合」「差集合」「積集合」を扱いました。<br><strong>ビット演算(論理演算)</strong>では主に「論理和 (OR)」「排他的論理和 (XOR)」「<strong>論理積 (AND)</strong>」が使われます。<br><strong>ビット演算</strong>なので 2進数、つまり 0 と 1 のみで演算します。</p></li>
<div class="inlook">
<ol>
<li><p>論理和 (OR | ←バーティカルバー)</p>
<p><strong>A | B = C</strong></p>
<div class="x-fit">
<table class="text-center">
<thead>
<th>A</th>
<th>OR</th>
<th>B</th>
<th>の時</th>
<th>C になる</th>
</thead>
<tbody>
<tr>
<td>0</td>
<td>|</td>
<td>0</td>
<td>=</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>|</td>
<td>1</td>
<td>=</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>|</td>
<td>0</td>
<td>=</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>|</td>
<td>1</td>
<td>=</td>
<td>1</td>
</tr>
</tbody>    
</table>
</div>
<p>論理和は、どちらかにでも 1 がある時は 1 になります。</p>
</li>
<br>
<li><p>排他的論理和 (XOR ^ ←ハット)</p>
<p><strong>A ^ B = C</strong></p>
<div class="x-fit">
<table class="text-center">
<thead>
<th>A</th>
<th>XOR</th>
<th>B</th>
<th>の時</th>
<th>C になる</th>
</thead>
<tbody>
<tr>
<td>0</td>
<td>^</td>
<td>0</td>
<td>=</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>^</td>
<td>1</td>
<td>=</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>^</td>
<td>0</td>
<td>=</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>^</td>
<td>1</td>
<td>=</td>
<td>0</td>
</tr>
</tbody>    
</table>
</div>
<p>排他的論理和は、どちらかが 1 の時だけ 1 になります。</p>
</li>
<br>
<li><p><strong>論理積 (AND & ←アンパサンド)</strong></p>
<p><strong>A & B = C</strong></p>
<div class="x-fit">
<table class="text-center">
<thead>
<th>A</th>
<th>AND</th>
<th>B</th>
<th>の時</th>
<th>C になる</th>
</thead>
<tbody>
<tr>
<td>0</td>
<td>&</td>
<td>0</td>
<td>=</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>&</td>
<td>1</td>
<td>=</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>&</td>
<td>0</td>
<td>=</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>&</td>
<td>1</td>
<td>=</td>
<td>1</td>
</tr>
</tbody>    
</table>
</div>
<p><strong>論理積</strong>は、どちらも 1 の時だけ 1 になります。かけ算と同じですね。😊</p>
</li>
</ol>
</div>
<br>
<p>この問題では、３番の<strong>論理積</strong>を扱います。問題にある「AND演算」とは、この<strong>論理積</strong>で演算するということです。</p>
</ul>
<ul>
<p>入力して整数型に変換した N は 10進数です。ビット演算とは言いますが、Pythonでは 10進数のままでもビット演算ができます。</p>
<p>例えば、問題の入力例1 では入力値が <code>3</code> ですが、3 は２進数では <mark>11</mark> です。<code>N & 1</code> の 1 は２進数では <mark>1</mark> です。ビット数を合わせれば <mark>01</mark> となります。</p>
<p>よって、<code>N & 1</code> とは、</p>
<p class="inlook">3 & 1 ← 10進数</p>
↓
<p class="inlook"><mark>11</mark> & <mark>01</mark> ← 2進数</p>
<p>↓</p>
<div class="inlook">
<pre>  <mark>11</mark><br>& <mark>01</mark><br>----<br>  <mark>01</mark> ← 2進数</pre>
</div>
↓<br>
<p class="inlook">1 ← 10進数</p>
<p>この最後の 1 が、<strong>AND演算の結果</strong>となります。</p>
<br>
<li><p><code>if N & 1 == 1:</code> の <code>== 1</code> の 1 も 10進数です。これも２進数にすると <mark>01</mark> です。</p></li>
<p>よって、「<code>N & 1 == 1</code> の時」とは、</p>
<p class="inlook">3 & 1 == 1 の時<br>↓↑<br><mark>11</mark> & <mark>01</mark> == <mark>01</mark> の時</p>
<p>であるので、出力結果が <code class="output">Yes</code> となるわけです。</p>
<p>この <code>== 1</code> の 1 は、ビット数が 4 (<mark>0001</mark>) であっても、8 (<mark>00000001</mark>) であっても、1ビット目のみ 1 です。1ビット目が 1 になるということは、10進数では奇数であるということです。<code>N % 2 == 1</code> と同じです。</p>
</ul>
<ul>
<p>これだけだとビット演算になんの意味があるのかがわからず、面白くもなんとも無いと思います。<strong>論理積</strong>を使った余談をしてみます。</p>
<p>ネットワーク通信では、コンピュータを特定するために「IPアドレス」が使われます。IPアドレスにはグループ名代わりとなる「ネットワーク部」と、機器のID番号を表す「ホスト部」の２つに分かれています。これらについての詳しい説明は省きますが、IPv4 の場合、例えば<strong>「192.168.0.1」というIPアドレスがあるとします。</strong></p>
<p>このIPアドレスの前半のどこまでが<mark style="background-color: coral">ネットワーク部</mark>で、後半のどこからがホスト部かを見つける方法に「サブネットマスク」というものが使われます。<br>サブネットマスクは「255.255.255.0」という表記のしかたをします。255 のところは<mark style="background-color: coral">ネットワーク部</mark>で、0 のところがホスト部です。</p>
<br>
<p>255 は 8ビットで、2進数で書くと <mark>11111111</mark> です。0 は <mark>00000000</mark> です。</p>
<p>「192.168.0.1」を 2進数表記にすると、</p>
<div class="x-fit">
<p><mark>11000000.10100000.00000000.00000001</mark></p>
</div>
<p>と書きます。一方サブネットマスク(「255.255.255.0」の場合)は、</p>
<div class="x-fit">
<p><mark>11111111.11111111.11111111.00000000</mark></p>
</div>
<p>と表記します。</p>
<p>この２つを<strong>論理積</strong>、つまり<strong>AND演算</strong>にかけると、</p>
<div class="x-fit inlook">
<p><pre>  <mark style="background-color: coral">11000000.10100000.00000000</mark>.00000001<br>
& <mark style="background-color: coral">11111111.11111111.11111111</mark>.00000000<br>
-------------------------------------<br>
  <mark style="background-color: coral">11000000.10100000.00000000</mark>.00000000<br><br>  ↓<br><br>  <mark style="background-color: coral">192.168.0</mark>.0</pre></p>
</div>
<p>これでこの <mark style="background-color: coral">192.168.0</mark> のところが<mark style="background-color: coral">ネットワーク部</mark>であるということを通信機器に伝えることができます。<br>ちなみにホスト部が 0 になっているIPアドレス「<mark style="background-color: coral">192.168.0</mark>.0」を「ネットワークアドレス」といいます。</p>
</ul>
<ul>
<p>集合演算とビット演算は<strong>理屈は同じ</strong>と先に言いましたが、「和集合と論理和」「積集合と論理積」は同じ様な考え方ができます。</p>
<p>和集合は「２つの集合を合わせて重複を省く」性質ですが、言い換えると「どちらか片方、もしくは両方に同じ値がある時に選ばれる」、つまり『値』が２進数の <mark>1</mark> に代わっただけで上の論理和の演算表のとおりとなります。</p>
<p>「和」という言葉が使われるので広く「足し算」と例えられますが、『<mark>{1}</mark> と <mark>{1}</mark> を合わせると <mark>{1, 1}</mark> になり、そこから重複を除去すると <mark>{1}</mark> になる』と考えれば、<strong>集合演算と同じ</strong>と考えられるので理解しやすいでしょう。</p>
<p>積集合は「両方に同じ値がある時のみに選ばれる」、つまり上の論理積の演算表のとおりです。</p>
<br>
<p>そして、排他的論理和(XOR)は集合演算にも存在します。</p>
<p><strong>どちらか片方にのみ存在する値が選ばれる</strong></p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">a = {1, 2, 3}
b = {2, 3, 4}
print(a ^ b)
</code></pre>
<code>{1, 4}</code>
</div>
<!-- ----------------------- code end ----------------------- -->
<br>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">a = {1, 2, 3}
a ^= {2, 3, 4}
print(a)
</code></pre>
<code>{1, 4}</code>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>排他的論理和は「暗号化・復号」などで使われます。興味がありましたらネットなどで調べてみてください。😊</p>
</ul>
<ul>
<p>これまでのことを踏まえれば、次の FINAL問題 ではどのようなプログラムが求められているのかが察しやすくなると思います。</p>
<p>そもそも、ビット演算はプログラミング学習的には現在Ｃランク問題を頑張って解いている方にはかなり難しいと思います。😅</p>
<p>わからなすぎて挫折してしまったとしても、今は問題ありませんからね！！👍</p>
</ul>
<footer><a class="backto" href="#c7-5" onclick="closeAccordion('c7-5')">STEP: 5 「1を数えよ」を解くために:part4 </a></footer>
</details>
</article>

<article>
<details id="c7-6"><summary>FINAL問題 1を数えよ【ビット演算】</summary>
<header><h3>1を数えよ【ビット演算】</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())  # part1

cnt = 0
while N > 0:  # part3
    if N & 1 == 1:  # part4
        cnt += 1  # part2
    N //= 2  # part3

print(cnt)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>これまでの流れを混ぜ合わせれば出来上がります。</p>
</ul>
<ul>
<p>まずここ、</p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">while N > 0:
    ・・・
    N //= 2
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>この部分は 10進数を 2進数に変換する際の『商が 0 になるまで N を 2 で割っていく』所です。</p>
<p>そして <strong class="while"></strong> の次の、</p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">if N & 1 == 1:
    cnt += 1
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>この部分は『N の１ビット目が 1 の時にカウントアップする』所です。</p>
<br>
<p>この <strong class="while"></strong>文の流れを見てみましょう。</p>
<p>N = 45 の時</p>
<p class="inlook">45<br>↓<br><mark>10110</mark><mark style="background-color: aqua;">1</mark><br>cnt = 1</p>
↓ 45 // 2 = 22
<p class="inlook">22<br>↓<br><mark>1011</mark><mark style="background-color: aqua;">0</mark></p>
↓ 22 // 2 = 11
<p class="inlook">11<br>↓<br><mark>101</mark><mark style="background-color: aqua;">1</mark><br>cnt = 2</p>
↓ 11 // 2 = 5
<p class="inlook">5<br>↓<br><mark>10</mark><mark style="background-color: aqua;">1</mark><br>cnt = 3</p>
↓ 5 // 2 = 2
<p class="inlook">2<br>↓<br><mark>1</mark><mark style="background-color: aqua;">0</mark></p>
↓ 2 // 2 = 0
<p class="inlook">0<br>↓<br><mark style="background-color: aqua;">1</mark><br>cnt = <code class="output">4</code></p>
<p>N が 0 なのでここでループを抜け、最後に <code>cnt</code> の値を画面に出力して完了です。</p>
</ul>
<br>
<ul>
<p>せっかくなので、paiza 解答コード例の補足説明もしてみます。上記の方法と真逆とも言えます。</p>
<li><p>paiza 解答コード例からそのまま引用</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())
ans = 0
bitMask = 1
while bitMask<=N:
    if bitMask&N != 0:
        ans += 1
    bitMask *= 2
    
print(ans)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>初めのプログラム例の「N を 2 で割っていく」方法ではなく、<code>N & 1</code> の <code>1</code> の方を 2倍していく方法です。</p>
</ul>
<ul>
<p>N = 45 の時</p>
<div class="x-fit inlook">
<p>bitMask = 1</p>
<table class="text-center">
<thead style="color:grey">
<th><small>重み(10進数)</small></th>
<th>32</th>
<th>16</th>
<th>8</th>
<th>4</th>
<th>2</th>
<th>1</th>
</thead>
<tbody>
<tr>
<td>bitMask</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td style="background-color: aqua;">1</td>
</tr>
<tr>
<td>N</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td style="background-color: aqua;">1</td>
</tr>
<tr>
<td>bitMask & N</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td style="background-color: aqua;">1</td>
</tr>
</tbody>
</table>
<p><strong>この時、</strong><code>bitMask & N</code> <strong>は「<ruby>重<rt style="color:black;">おも</rt>み」と等しくなります。</strong>よって <code>if bitMask&N != 0:</code> が <strong>True</strong> となり、<code>ans += 1</code> が実行されます。</p>
<p>ans = 1</p>
</div>
↓ bitMask * 2 = 2
<div class="x-fit inlook">
<p>bitMask = 2</p>
<table class="text-center">
<thead style="color:grey">
<th><small>重み(10進数)</small></th>
<th>32</th>
<th>16</th>
<th>8</th>
<th>4</th>
<th>2</th>
<th>1</th>
</thead>
<tbody>
<tr>
<td>bitMask</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>N</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>bitMask & N</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td style="background-color: coral;">0</td>
<td style="background-color: coral;">0</td>
</div>
</tr>
</tbody>
</table>
<p><code>bitMask & N</code> は <code>0</code> となります。<code>if bitMask&N != 0:</code> が <strong>False</strong> となりますのでカウントアップせず、次のループに移ります。<code>== 1</code> ではなく <code>!= 0</code> になっているのは、<code>bitMask & N</code> が重みと等しくなる為に、0 か 0 でないかで判定しているわけです。</p>
</div>
↓ bitMask * 2 = 4
<div class="x-fit inlook">
<p>bitMask = 4</p>
<table class="text-center">
<thead style="color:grey">
<th><small>重み(10進数)</small></th>
<th>32</th>
<th>16</th>
<th>8</th>
<th>4</th>
<th>2</th>
<th>1</th>
</thead>
<tbody>
<tr>
<td>bitMask</td>
<td></td>
<td></td>
<td></td>
<td style="background-color: aqua;">1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>N</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td style="background-color: aqua;">1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>bitMask & N</td>
<td></td>
<td></td>
<td></td>
<td style="background-color: aqua;">1</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><code>if bitMask&N != 0:</code> → <strong>True</strong></p>
<p>ans = 2</p>
</div>
↓ bitMask * 2 = 8
<div class="x-fit inlook">
<p>bitMask = 8</p>
<table class="text-center">
<thead style="color:grey">
<th><small>重み(10進数)</small></th>
<th>32</th>
<th>16</th>
<th>8</th>
<th>4</th>
<th>2</th>
<th>1</th>
</thead>
<tbody>
<tr>
<td>bitMask</td>
<td></td>
<td></td>
<td style="background-color: aqua;">1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>N</td>
<td>1</td>
<td>0</td>
<td style="background-color: aqua;">1</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>bitMask & N</td>
<td></td>
<td></td>
<td style="background-color: aqua;">1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><code>if bitMask&N != 0:</code> → <strong>True</strong></p>
<p>ans = 3</p>
</div>
↓ bitMask * 2 = 16
<div class="x-fit inlook">
<p>bitMask = 16</p>
<table class="text-center">
<thead style="color:grey">
<th><small>重み(10進数)</small></th>
<th>32</th>
<th>16</th>
<th>8</th>
<th>4</th>
<th>2</th>
<th>1</th>
</thead>
<tbody>
<tr>
<td>bitMask</td>
<td></td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>N</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>bitMask & N</td>
<td></td>
<td style="background-color: coral;">0</td>
<td style="background-color: coral;">0</td>
<td style="background-color: coral;">0</td>
<td style="background-color: coral;">0</td>
<td style="background-color: coral;">0</td>
</tr>
</tbody>
</table>
<p><code>if bitMask&N != 0:</code> → <strong>False</strong></p>
</div>
↓ bitMask * 2 = 32
<div class="x-fit inlook">
<p>bitMask = 32</p>
<table class="text-center">
<thead style="color:grey">
<th><small>重み(10進数)</small></th>
<th>32</th>
<th>16</th>
<th>8</th>
<th>4</th>
<th>2</th>
<th>1</th>
</thead>
<tbody>
<tr>
<td>bitMask</td>
<td style="background-color: aqua;">1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>N</td>
<td style="background-color: aqua;">1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>bitMask & N</td>
<td style="background-color: aqua;">1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><code>if bitMask&N != 0:</code> → <strong>True</strong></p>
<p>ans = <code class="output">4</code></p>
</div>
↓ bitMask * 2 = 64
<p>ここで <code>N = 45</code> を超えたので、<code>while bitMask<=N:</code> の条件が <strong>False</strong> になり、ループを抜け、<code>ans</code> の値を画面に出力して完了となります。</p>
</ul>
<br>
<ul>
<p>『ビットシフトを使った解法』のほうも解説しましょう。</p>
<li><p>paiza 解答コード例 2</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())
ans = 0
target = 0 # 1 を何ビット左にシフトさせるか
while 1 << target <= N:
    if 1 << target & N != 0:
        ans += 1
    target += 1
    
print(ans)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p>paiza 解答コード例 (改)</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N = int(input())
ans = 0
target = 1
while target <= N:
    if target & N != 0:
        ans += 1
    target <<= 1
    
print(ans)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>ビットシフトというのは、『ビット全体を左右にずらす』ことです。1ビットを左に１つシフト(移動)すると 2ビットとなります。さらに 1ビット左にシフトすると 3ビットとなります。</p>
<p>4 ← 2 ← 1</p>
<p>となるわけですが、左へシフトさせると掛け算、右へシフトさせると割り算することになります。2進数なので 2 で掛け算割り算をすることになります。これは 10進数でも同じことが言えます。</p>
<p>100 ← 10 ← 1</p>
<p>見た目だけなら 2進数も 10進数も同じですね。😆</p>
<br>
<p> ビットを右にシフトすると 2 で割り算をすることになりますが、この FINAL問題の解説の初めのプログラムでは 2 で割り算するプログラムになっています。そのプログラム例の <strong class="while"></strong>文の流れの解説を見てみると、2 で割るごとにビットが右にシフトされていく様子がよくわかると思います。</p>
</ul>
<ul>
<p><code>bitMask</code> が <code>target</code> に変数名が変わっただけです。ただ一箇所、</p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">target <<= 1
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>ここでビットをシフトしています。左にシフトする時は <code>&lt;&lt;</code> 、右にシフトする時は <code>>></code> を使います。そして何ビットシフトするのかを正数で示します。正数とは 0以上の整数のことです。今回は１ビットなので <code>1</code> です。こうすることでビット数が１つずつ増えていく、つまり倍々となっていきます。</p>
<p>これは <code>target *= 2</code> と同等です。<code>target &lt;&lt;= 1</code> と <code>target *= 2</code> のどちらでも等しく動作します。</p>
<br>
<p>ということで、初めのプログラムの</p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">N //= 2  # part3
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>この部分もアレして動かしてみましょう。😉</p>
<br>
<p>ちなみに <code>target &lt;&lt;= 1</code> は、<code>target = target &lt;&lt; 1</code> のことです。</p>
<dl>
<dt>target << 1</dt>
<dd>target を左に１ビットシフトする。(増分は１ビット)<br>都度 targetビットから左に１ビットずつシフトしています。<br>10 ← 1<br>100 ← 10<br>1000 ← 100</dd>
<dt>1 << target</dt>
<dd>１ビットから左に targetビットシフトする。(増分は targetビット)<br>常に１ビット目から左に targetビットシフトしています。<br>10 ← 1<br>100 ← 1<br>1000 ← 1</dd>
</dl>
<br>
<p>paiza 解答コード例では <code>target</code> の初期値が <code>0</code> になっていますが、これは一回目のループで「左に 0 ビットシフトする」、つまり 1ビットの所から始める為に初期値は <code>0</code> となっています。</p>
<p>(改) のほうは初期値が <code>1</code> になっています。これはビットをシフトし始めるのがループ１周目の最後になっているからです。その上、これを <code>0</code> にしてしまうと常に <mark>0 × 2 = 0</mark> となり、無限ループに陥ります。0ビット、要するにビットが存在しないのにビットをシフトしようとしても、無いものは無いのでシフトできないので、常に 0 になってしまうわけです。</p>
</ul>
<ul>
<p><strong>ビット演算</strong>は、コンピュータが使う２進数のまま値を操作するのでコンピュータに対してとても優しい演算法です。あなたが２進数を理解し、使い慣れるようにならない限り「あ、これはビット演算が効率よさそうだな」とひらめくことはまず無いでしょうけど😅、ITの学習を幅広く行なっていくと度々登場してきます。理解半分でも、いずれまたやるべき時が必ず訪れますので『じゃあとりあえず、今はこのくらいでいいか』と割り切っちゃって次の学習に進んでしまいましょう。😄</p>
</ul>
<footer><a class="backto" href="#c7-6" onclick="closeAccordion('c7-6')">FINAL問題 1を数えよ【ビット演算】</a></footer>
</details>
</article>

<footer><a class="backto" href="#c7" onclick="closeAccordion('c7')">1を数えよ【ビット演算】</a></footer>
</details>
</section>

<section>
<details id="c8"><summary> 文字列の抽出</summary>
<header><h2>文字列の抽出</h2></header>
<article>
<details id="c8-1"><summary>STEP: 1 文字列の抽出</summary>
<header><h3>文字列の抽出</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">tag_a, tag_b = input().split()
S = input()

tag_a_len = len(tag_a)
tag_b_len = len(tag_b)

idx = 0
while idx < len(S) - tag_a_len:
    if S[idx:idx+tag_a_len] != tag_a:
        idx += 1
        continue
    
    idx += tag_a_len
    text_st_idx = idx
    while S[idx:idx+tag_b_len] != tag_b:
        idx += 1

    if idx - text_st_idx > 0:
        print(S[text_st_idx:idx])
    else:
        print('&lt;blank&gt;')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>Ｃランクにしては難易度高めだと思います。線形探索の問題です。</p>
</ul>
<footer><a class="backto" href="#c8-1" onclick="closeAccordion('c8-1')">STEP: 1 文字列の抽出</a></footer>
</details>
</article>

<article>
<details id="c8-2"><summary>STEP: 2 文字列の抽出 : part1</summary>
<header><h3>文字列の抽出 : part1</h3></header>
<ul>
<li><p>例１</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">S = input()
print(S)
print(S)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p>例２</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">S = input()
for _ in range(2):
    print(S)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
</ul>
<footer><a class="backto" href="#c8-2" onclick="closeAccordion('c8-2')">STEP: 2 文字列の抽出 : part1</a></footer>
</details>
</article>

<article>
<details id="c8-3"><summary>STEP: 3 文字列の抽出 : part2</summary>
<header><h3>文字列の抽出 : part2</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">tag_a, tag_b = input().split()
S = input()
a_index, b_index = map(int, input().split())

idx_st = a_index + len(tag_a) - 1
idx_ed = b_index - 1

text = S[idx_st:idx_ed]

if text:
    print(text)
else:
    print('blank')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>ここで求められているスキルは「インデックスの理解」です。タグの開始位置番号は与えられていますので、これを使って抽出する文字列の範囲を作ります。</p>
</ul>
<ul>
<p>単純に開始タグと終了タグの開始位置番号をそのまま使って文字列を抽出すると次のようになります。</p>
<div>
<pre><code class="plaintext">入力例1
    &lt;a&gt; &lt;b&gt;
    a&lt;a&gt;c&lt;b&gt;c
    2 6
</code></pre>
<code class="output">a&gt;c&lt;</code>
</div>
<p>与えられた開始位置は１文字目から数えられています。位置番号は 0 から始まりますので、これらの数から <strong>1 を引く必要があります。</strong></p>
<p>そうすると今度は、</p>
<p><code class="output">&lt;a&gt;c</code></p>
<p>となります。開始タグも終了タグも<strong>開始位置の番号</strong>なのでこうなってしまいます。</p>
</ul>
<ul>
<p>抽出する文字列の開始位置番号は<strong>「開始タグの開始位置番号 + 開始タグの文字数」</strong>で得られます。</p>
<div class="x-fit">
<table>
<thead>
<th>位置番号</th>
<th>0</th>
<th><strong>1</strong></th>
<th>2</th>
<th>3</th>
<th><strong>4</strong></th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
</thead>
<tbody>
<tr>
<th>S</th>
<td>a</td>
<td style="background-color:orange;">&lt;</td>
<td style="background-color: orange;">a</td>
<td style="background-color: orange;">&gt;</td>
<td style="background-color: aqua;">c</td>
<td>&lt;</td>
<td>b</td>
<td>&gt;</td>
<td>c</td>
</tr>
</tbody>
</table>
</div>
<p>位置番号は 1 、開始タグの文字数は 3 、<mark>1 + 3 = 4</mark> で、抽出する文字列の開始位置番号は <strong>4</strong> になります。そのプログラムが、</p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">idx_st = a_index + len(tag_a) - 1
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>この部分です。ここから、</p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">idx_ed = b_index - 1
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>この部分までが<strong>「抽出する文字列の範囲」</strong>となります。</p>
</ul>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">text = S[idx_st:idx_ed]
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>ここで抽出する文字列を、スライスを使って範囲を指定しているのですが、<strong>抽出する文字列が</strong></p>
<dl>
<dt>ある場合</dt>
<dd><code>text</code> に抽出した文字列が代入されます。</dd>
<dt>無かった場合</dt>
<dd><code>text</code> に <code>''</code> が代入されます。</dd>
</dl>
<br>
<p>その次のプログラムの</p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">if text:
    print(text)
else:
    print('blank')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p><code>if text:</code> では、<code>text</code> に文字列があれば <strong>True</strong> に、無い <code>''</code> 場合は <strong>False</strong> となってそれぞれの結果が画面に出力されます。</p>
<p>この <strong class="if"></strong>文の評価の判定については「<a href="../../2/0020truefalse.html#c4-h" class="linked" target="_blank">bool型 True と False - 『ある』か『ない』か</a>」で表にしてありますので、そちらをご覧ください。</p>
</ul>
<footer><a class="backto" href="#c8-3" onclick="closeAccordion('c8-3')">STEP: 3 文字列の抽出 : part2</a></footer>
</details>
</article>

<article>
<details id="c8-4"><summary>STEP: 4 文字列の抽出 : part3</summary>
<header><h3>文字列の抽出 : part3</h3></header>
<ul>
<li><p>例１</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">tag_a, tag_b = input().split()
S = input()
print(S.find(tag_a)+1, S.find(tag_b)+1)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p>例２</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">input()
S = input()

idxs = []
for i, s in enumerate(S, start=1):
    if s == '<':
        idxs.append(i)

print(*idxs)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<li><p>例３</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">tag_a, tag_b = input().split()
S = input()

tag_a_len = len(tag_a)
tag_b_len = len(tag_b)

tag_idxs = []
for i in range(len(S)):
    if S[i:i+tag_a_len] == tag_a or S[i:i+tag_b_len] == tag_b:
        tag_idxs.append(i + 1)

print(*tag_idxs)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>後先考えなくてよいのであれば例１の方法が簡単です。<strong class="func">.index()</strong> メソッドも使えます。</p>
<p>例２は、「期待する出力」に『<strong class="b">つまり、それぞれのタグの&lt;の位置が何文字目であるかを出力してください。</strong>』とありますのでただそれに従い、なるべく簡単な方法で書いただけのプログラムです。</p>
<p>例３は、各タグの文字列を <code>S</code> の先頭から末尾まで探し、見つけたらその位置をリストに格納します。問題文に『<strong class="b">テキストデータは必ず開始タグと終了タグがこの順で丁度1つずつ存在します。</strong>』とありますので、必ずこの順で見つけられます。</p>
<p>リストを使っているのは、出力をラクにするためです。Pythonはホント、この形式の出力がめんどくさい。😓<br>この方法ならばリストをアンパックするだけで期待する出力形式が得られます。</p>
<p>この <strong class="func">print(*)</strong> の機能については「<a href="../../2/0030mieruka.html#c1-3h" class="linked" target="_blank">見える化ちゃん - print() のさらなる機能</a>」で学習できます。もうこれ以降使わないけど。😅</p>
</ul>
<footer><a class="backto" href="#c8-4" onclick="closeAccordion('c8-4')">STEP: 4 文字列の抽出 : part3</a></footer>
</details>
</article>

<article>
<details id="c8-5"><summary>STEP: 5 文字列の抽出 : part4</summary>
<header><h3>文字列の抽出 : part4</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">tag_a, tag_b = input().split()
S = input()

tag_a_len = len(tag_a)
tag_b_len = len(tag_b)

idx = 0
while idx < len(S):
    # tag_a を探す
    if S[idx:idx+tag_a_len] != tag_a:
        idx += 1
        continue

    tag_a_idx = idx + 1
    
    # tag_b を探す
    while S[idx:idx+tag_b_len] != tag_b:
        idx += 1

    tag_b_idx = idx + 1
    
    print(tag_a_idx, tag_b_idx)
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>めんどくさいですね。😓</p>
<p>しかしやっていることはいたって単純で、 文字列 <code>S</code> の先頭から <code>tag_a</code> を探し、見つけたら <code>tag_a_idx</code> に位置番号を記録し、次の <code>tag_b</code> も同様の処理をします。これを文字列 <code>S</code> の末尾まで行ないます。</p>
<p>paiza 解答コード例では、文字列 <code>S</code> の末尾まで探索するのは無駄なので、<code>tag_a</code> (※)の文字数分を文字列 <code>S</code> の文字数から引いています。これはここでは次の FINAL問題で導入します。</p>
<p>※ <code>tag_a_len + tag_b_len - 1</code> だともっとよいかも。😊</p>
</ul>
<footer><a class="backto" href="#c8-5" onclick="closeAccordion('c8-5')">STEP: 5 文字列の抽出 : part4</a></footer>
</details>
</article>

<article>
<details id="c8-6"><summary>FINAL問題 文字列の抽出</summary>
<header><h3>文字列の抽出</h3></header>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">tag_a, tag_b = input().split()
S = input()

tag_a_len = len(tag_a)
tag_b_len = len(tag_b)

idx = 0
while idx < len(S) - (tag_a_len + tag_b_len - 1):
    if S[idx:idx+tag_a_len] != tag_a:
        idx += 1
        continue
    
    idx += tag_a_len
    text_st_idx = idx
    while S[idx:idx+tag_b_len] != tag_b:
        idx += 1

    if idx - text_st_idx > 0:
        print(S[text_st_idx:idx])
    else:
        print('&lt;blank&gt;')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>STEP 3 の複数取得版です。プログラムの形は１つ前の STEP 5 寄りですが。</p>
</ul>
<ul>
<p>探索範囲は、ここでは「<code>S</code> の文字数 - (<code>tag_a_len + tag_b_len - 1</code>)」とします。</p>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">while idx < len(S) - (tag_a_len + tag_b_len - 1):
    if S[idx:idx+tag_a_len] != tag_a:
        idx += 1
        continue
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>ここで <code>tag_a</code> を探しています。ひたすら探すだけです。(詳しい説明を最後にします)</p>
<br>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">    idx += tag_a_len  # 位置番号を文字数分送る
    text_st_idx = idx
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p><code>tag_a</code> がみつかったら位置番号を <code>tag_a</code> の文字数分送って(STEP 3 でやったことです)、抽出する文字列の先頭の位置番号を、変数 <code>text_st_idx</code> に保存します。これは最後、抽出した文字列をスライスを使って出力する際に、開始の位置として使うためのものです。</p>
</ul>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">    while S[idx:idx+tag_b_len] != tag_b:
        idx += 1
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>今度は <code>tag_b</code> をひたすら探します。みつけたらこのループを抜けます。<br>この時、位置番号は <code>tag_b</code> の先頭にあり、これをスライスの [<em>start</em>:<strong>stop</strong>] に使うと、抽出する文字列の末尾までが取得できます。</p>
</ul>
<ul>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">    if idx - text_st_idx > 0:
        print(S[text_st_idx:idx])
    else:
        print('&lt;blank&gt;')
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p><code>idx - text_st_idx > 0</code> とは、例えば、</p>
<p><code>text_st_idx</code> = 9<br><code>idx</code> = 13</p>
<p>の時、<mark>13 - 9 = 4</mark> で抽出する文字は４文字となります。0 より大きいとは、抽出する文字が１文字以上ある時ということになりますので、その場合はスライスを使ってその範囲の文字を出力します。</p>
<p>抽出する文字が無い場合は、<code>idx</code> が１つも動きませんので、<code>text_st_idx</code> と <code>idx</code> の値は同じになっています。ですので <mark>idx - text_st_idx = 0</mark> で <strong class="if"></strong>文の判定は <strong>False</strong> となり、画面に <code class="output">&lt;blank&gt;</code> と出力されます。</p>
<br>
<p>これを初めの <strong class="while"></strong>の条件式の判定が <strong>False</strong> となるまでループします。</p>
</ul>
<ul>
<li><p>最後に、この部分を詳しく説明します。</p></li>
<!-- ------------------------- code ------------------------- -->
<div>
<pre><code class="language-python">while idx < len(S) - (tag_a_len + tag_b_len - 1):  # ← ココ
    if S[idx:idx+tag_a_len] != tag_a:
        idx += 1
        continue
</code></pre>
</div>
<!-- ----------------------- code end ----------------------- -->
<p>抽出する文字がなかった場合、開始タグと終了タグを繋げた文字数は「<strong>開始タグの文字数 + 終了タグの文字数</strong>」です。</p>
<p>例）</p>
<div class="inlook">
<p>tag_a = '&lt;a&gt;'<br>tag_a_len = <strong>3</strong></p>tag_b = '&lt;b&gt;'<br>tag_b_len = <strong>3</strong></p>
<p>3 + 3 = <strong>6</strong>(文字)</p>
</div>
<p>抽出する文字がない場合は <mark>&lt;a&gt;&lt;b&gt;</mark> という文字列になっています。この場合、最低限検索に必要な文字数は<strong>６文字</strong>です。ということは、残り５文字以下の文字列からは <mark>&lt;a&gt;&lt;b&gt;</mark> という文字列はヒットしませんので、これ以降調べる意味はありません。</p>
<div class="x-fit">
<table class="text-center">
<thead>
<th><small>残り文字数</small></th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
</thead>
<tbody>
<tr>
<th><small>6文字までは<br>ヒットする →</small></th>
<td style="background-color: aqua;">&lt;</td>
<td style="background-color: aqua;">a</td>
<td style="background-color: aqua;">&gt;</td>
<td>&lt;</td>
<td>b</td>
<td>&gt;</td>
</tr>
<tr>
<th><small>5文字以下は<br>ヒットしない →</small></th>
<td></td>
<td style="background-color: coral">&lt;</td>
<td style="background-color: coral">a</td>
<td style="background-color: coral">&gt;</td>
<td>&lt;</td>
<td>b</td>
</tr>
</tbody>
</table>
</div>
<p>よって、</p>
<div class="inlook x-fit">
<p>len(S) - (tag_a_len + tag_b_len - 1)</p>
</div>
<p>と書くことができます。</p>
</ul>
<ul>
<p>『う～ん、わかりそうでイマイチ自信ないな』と感じたら、問題集『定番アルゴリズムの習得 - 線形探索メニュー』をやってみてください。</p>
</ul>
<footer><a class="backto" href="#c8-6" onclick="closeAccordion('c8-6')">FINAL問題 文字列の抽出</a></footer>
</details>
</article>

<footer><a class="backto" href="#c8" onclick="closeAccordion('c8')">文字列の抽出 </a></footer>
</details>
</section>


</main>

<footer id="ft">
  <p>【paiza問題集 解説】<br>Cランク・スキルチェック過去問題セット</p>
</footer>
</body>
</html>